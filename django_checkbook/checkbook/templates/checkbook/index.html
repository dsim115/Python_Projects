{% extends "checkbook_base.html" %}

{% block title %}Bluebird Banking{% endblock %}

{% block content %}
    <h3>Welcome to BlueBird Banking</h3>
    <hr>

    <div class="text-center">
        <h5>Manage your existing account!</h5>

        <!-- ✅ Fixed: no action needed -->
        <form method="GET" onsubmit="event.preventDefault(); goToAccount();">
            <label id="index-label">Choose Account:</label>
            <select name="account" id="account-select" required>
                {% for account in accounts %}
                    <option value="{{ account.id }}">{{ account.first_name }} {{ account.last_name }}</option>
                {% endfor %}
            </select><br><br>
            <button type="submit">Go to Account</button>
        </form>

        <!-- ✅ JavaScript redirect handler -->
        <script>
            function goToAccount() {
                const selectedId = document.getElementById('account-select').value;
                if (selectedId) {
                    window.location.href = '/account/' + selectedId + '/';
                }
            }
        </script>
    </div>

    <hr>

    <div class="text-center">
        <h5>Add another account!</h5>
        <a href="{% url 'create_account' %}" class="btn btn-primary">Create Account</a>
    </div>
{% endblock %}
